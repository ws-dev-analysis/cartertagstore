<script>
    function getAttributes() {
        // 현재 클릭된 요소
        var element = {{Click Element}}
      
        // 결과를 저장할 객체
        var attributes = {};
      
        // data-screen-info를 가진 요소를 찾을 때까지 타고 올라감
        while (element && !element.hasAttribute('data-screen-info')) {
          // 모든 attribute를 확인
          Array.from(element.attributes).forEach(function(attr) {
            if (attr.name.startsWith('data-ep') || attr.name.startsWith('data-sec') || attr.name.startsWith('data-view')) {
              attributes[attr.name] = attr.value;
            }
          });
          element = element.parentElement;
        }
      
        // data-screen-info를 가진 요소의 attribute도 확인
        if (element && element.hasAttribute('data-screen-info')) {
          Array.from(element.attributes).forEach(function(attr) {
            if (attr.name.startsWith('data-ep') || attr.name.startsWith('data-sec') || attr.name.startsWith('data-view')) {
              attributes[attr.name] = attr.value;
            }
          });
        }
      
        // 키 매핑 테이블
        var keyMapping = {
          'data-ep-label': 'ep_label',
          'data-view-page-title': 'page_title',
          'data-ep-label-text': 'ep_label_text',
          'data-sec-area': 'ep_event_area',
          'data-view-screen-id': 'screen_id'
          // 추가적인 키 매핑을 여기에 추가
        };
      
        // 변환된 객체를 저장할 새로운 객체
        var transformedAttributes = {};
      
        // 키 변환 작업
        Object.keys(attributes).forEach(function(key) {
          var newKey = keyMapping[key] || key; // 매핑 테이블에 키가 없으면 원래 키 사용
          transformedAttributes[newKey] = attributes[key];
        });
      
        return transformedAttributes;
     }
    
      window.dataLayer.push({
        event: 'get_attributes',
        ga_att_data: getAttributes()
      });
    </script>
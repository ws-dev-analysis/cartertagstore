<script>
    (function () {
    
        var dataSections = [];
        
        // Get page info
        function getPageData() {
            var pageElement = document.querySelector('[data-gtm-page]');
            if (!pageElement) {
                return null;
            }
            var pageData = pageElement.dataset.gtmBody ? JSON.parse(pageElement.dataset.gtmBody) : null;
            if (pageData) {
                pageData.event = "screen_view"
            }
        }
    
        var pageData = getPageData();
        if (!pageData) {
            return null;
        }
    
    
        // Get section names
        function getSectionNames(element) {
            var sections = [];
            var currentElement = element.closest('[data-gtm-click]');
            while (currentElement) {
                if (currentElement.dataset.gtmPage) {
                    break;
                }
                var section = currentElement.dataset.gtmSection;
                if (section) {
                    sections.push(section);
                }
                currentElement = currentElement.parentElement;
            }
            return sections.reverse().join('-');
        }
    
        var section = getSectionNames(element);
    
        // Combine data
        var combinedData = Object.assign({}, pageData, clickData);
    
        // Push to dataLayer
        console.log('Click')
        console.log(combinedData);
        dataLayer.push(combinedData);
    
        return combinedData;
      
    })();
    
    </script>